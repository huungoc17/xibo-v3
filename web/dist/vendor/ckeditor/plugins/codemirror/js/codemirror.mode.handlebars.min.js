!function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define("addon/mode/simple.js",["../../lib/codemirror"],e):e(CodeMirror)}((function(e){function t(e,t){if(!e.hasOwnProperty(t))throw Error("Undefined state "+t+" in simple mode")}function n(e,t){if(!e)return/(?:)/;var n="";return e instanceof RegExp?(e.ignoreCase&&(n="i"),e=e.source):e=String(e),new RegExp((!1===t?"":"^")+"(?:"+e+")",n)}function r(e,r){(e.next||e.push)&&t(r,e.next||e.push),this.regex=n(e.regex),this.token=function(e){if(!e)return null;if(e.apply)return e;if("string"==typeof e)return e.replace(/\./g," ");for(var t=[],n=0;n<e.length;n++)t.push(e[n]&&e[n].replace(/\./g," "));return t}(e.token),this.data=e}function o(t,r){return function(o,i){if(i.pending){var l=i.pending.shift();return 0==i.pending.length&&(i.pending=null),o.pos+=l.text.length,l.token}var d;if(i.local)return i.local.end&&o.match(i.local.end)?(l=i.local.endToken||null,i.local=i.localState=null,l):(l=i.local.mode.token(o,i.localState),i.local.endScan&&(d=i.local.endScan.exec(o.current()))&&(o.pos=o.start+d.index),l);for(var s=t[i.state],c=0;c<s.length;c++)if(d=(!(l=s[c]).data.sol||o.sol())&&o.match(l.regex)){if(l.data.next?i.state=l.data.next:l.data.push?((i.stack||(i.stack=[])).push(i.state),i.state=l.data.push):l.data.pop&&i.stack&&i.stack.length&&(i.state=i.stack.pop()),l.data.mode){var u=r,f=(s=i,c=l.data.mode,l.token),m=void 0;if(c.persistent)for(var p=s.persistentStates;p&&!m;p=p.next)(c.spec?a(c.spec,p.spec):c.mode==p.mode)&&(m=p);u=m?m.mode:c.mode||e.getMode(u,c.spec),p=m?m.state:e.startState(u),c.persistent&&!m&&(s.persistentStates={mode:u,spec:c.spec,state:p,next:s.persistentStates}),s.localState=p,s.local={mode:u,end:c.end&&n(c.end),endScan:c.end&&!1!==c.forceEnd&&n(c.end,!1),endToken:f&&f.join?f[f.length-1]:f}}if(l.data.indent&&i.indent.push(o.indentation()+r.indentUnit),l.data.dedent&&i.indent.pop(),(s=l.token)&&s.apply&&(s=s(d)),2<d.length&&l.token&&"string"!=typeof l.token){for(i.pending=[],c=2;c<d.length;c++)d[c]&&i.pending.push({text:d[c],token:l.token[c-1]});return o.backUp(d[0].length-(d[1]?d[1].length:0)),s[0]}return s&&s.join?s[0]:s}return o.next(),null}}function a(e,t){if(e===t)return!0;if(!e||"object"!=typeof e||!t||"object"!=typeof t)return!1;var n,r=0;for(n in e)if(e.hasOwnProperty(n)){if(!t.hasOwnProperty(n)||!a(e[n],t[n]))return!1;r++}for(n in t)t.hasOwnProperty(n)&&r--;return 0==r}function i(t,n){return function(r,o,a){if(r.local&&r.local.mode.indent)return r.local.mode.indent(r.localState,o,a);if(!(a=null==r.indent||r.local)&&(a=n.dontIndentStates)){e:{a=n.dontIndentStates;for(var i=0;i<a.length;i++)if(a[i]===r.state){a=!0;break e}a=void 0}a=-1<a}if(a)return e.Pass;a=r.indent.length-1,i=t[r.state];e:for(;;){for(var l=0;l<i.length;l++){var d=i[l];if(d.data.dedent&&!1!==d.data.dedentIfLineStart){var s=d.regex.exec(o);if(s&&s[0]){a--,(d.next||d.push)&&(i=t[d.next||d.push]),o=o.slice(s[0].length);continue e}}}break}return 0>a?0:r.indent[a]}}e.defineSimpleMode=function(t,n){e.defineMode(t,(function(t){return e.simpleMode(t,n)}))},e.simpleMode=function(n,a){t(a,"start");var l,d={},s=a.meta||{},c=!1;for(l in a)if(l!=s&&a.hasOwnProperty(l))for(var u=d[l]=[],f=a[l],m=0;m<f.length;m++){var p=f[m];u.push(new r(p,a)),(p.indent||p.dedent)&&(c=!0)}if(d={startState:function(){return{state:"start",pending:null,local:null,localState:null,indent:c?[]:null}},copyState:function(t){var n={state:t.state,pending:t.pending,local:t.local,localState:null,indent:t.indent&&t.indent.slice(0)};t.localState&&(n.localState=e.copyState(t.local.mode,t.localState)),t.stack&&(n.stack=t.stack.slice(0));for(var r=t.persistentStates;r;r=r.next)n.persistentStates={mode:r.mode,spec:r.spec,state:r.state==t.localState?n.localState:e.copyState(r.mode,r.state),next:n.persistentStates};return n},token:o(d,n),innerMode:function(e){return e.local&&{mode:e.local.mode,state:e.localState}},indent:i(d,s)},s)for(var g in s)s.hasOwnProperty(g)&&(d[g]=s[g]);return d}})),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define("addon/mode/multiplex",["../../lib/codemirror"],e):e(CodeMirror)}((function(e){e.multiplexingMode=function(t){function n(e,t,n,r){return"string"==typeof t?(n=e.indexOf(t,n),r&&-1<n?n+t.length:n):(t=t.exec(n?e.slice(n):e))?t.index+n+(r?t[0].length:0):-1}var r=Array.prototype.slice.call(arguments,1);return{startState:function(){return{outer:e.startState(t),innerActive:null,inner:null}},copyState:function(n){return{outer:e.copyState(t,n.outer),innerActive:n.innerActive,inner:n.innerActive&&e.copyState(n.innerActive.mode,n.inner)}},token:function(o,a){if(a.innerActive){var i=a.innerActive,l=o.string;if(!i.close&&o.sol())return a.innerActive=a.inner=null,this.token(o,a);var d=i.close?n(l,i.close,o.pos,i.parseDelimiters):-1;if(d==o.pos&&!i.parseDelimiters)return o.match(i.close),a.innerActive=a.inner=null,i.delimStyle&&i.delimStyle+" "+i.delimStyle+"-close";-1<d&&(o.string=l.slice(0,d));var s=i.mode.token(o,a.inner);return-1<d&&(o.string=l),d==o.pos&&i.parseDelimiters&&(a.innerActive=a.inner=null),i.innerStyle&&(s=s?s+" "+i.innerStyle:i.innerStyle),s}s=1/0,l=o.string;for(var c=0;c<r.length;++c){if((d=n(l,(i=r[c]).open,o.pos))==o.pos)return i.parseDelimiters||o.match(i.open),a.innerActive=i,l=0,t.indent&&(d=t.indent(a.outer,"",""))!==e.Pass&&(l=d),a.inner=e.startState(i.mode,l),i.delimStyle&&i.delimStyle+" "+i.delimStyle+"-open";-1!=d&&d<s&&(s=d)}return s!=1/0&&(o.string=l.slice(0,s)),d=t.token(o,a.outer),s!=1/0&&(o.string=l),d},indent:function(n,r,o){var a=n.innerActive?n.innerActive.mode:t;return a.indent?a.indent(n.innerActive?n.inner:n.outer,r,o):e.Pass},blankLine:function(n){var o=n.innerActive?n.innerActive.mode:t;if(o.blankLine&&o.blankLine(n.innerActive?n.inner:n.outer),n.innerActive)"\n"===n.innerActive.close&&(n.innerActive=n.inner=null);else for(var a=0;a<r.length;++a){var i=r[a];"\n"===i.open&&(n.innerActive=i,n.inner=e.startState(i.mode,o.indent?o.indent(n.outer,"",""):0))}},electricChars:t.electricChars,innerMode:function(e){return e.inner?{state:e.inner,mode:e.innerActive.mode}:{state:e.outer,mode:t}}}}})),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror"),require("../../addon/mode/simple"),require("../../addon/mode/multiplex")):"function"==typeof define&&define.amd?define("mode/handlebars/handlebars.js",["../../lib/codemirror","../../addon/mode/simple","../../addon/mode/multiplex"],e):e(CodeMirror)}((function(e){e.defineSimpleMode("handlebars-tags",{start:[{regex:/\{\{\{/,push:"handlebars_raw",token:"tag"},{regex:/\{\{!--/,push:"dash_comment",token:"comment"},{regex:/\{\{!/,push:"comment",token:"comment"},{regex:/\{\{/,push:"handlebars",token:"tag"}],handlebars_raw:[{regex:/\}\}\}/,pop:!0,token:"tag"}],handlebars:[{regex:/\}\}/,pop:!0,token:"tag"},{regex:/"(?:[^\\"]|\\.)*"?/,token:"string"},{regex:/'(?:[^\\']|\\.)*'?/,token:"string"},{regex:/>|[#\/]([A-Za-z_]\w*)/,token:"keyword"},{regex:/(?:else|this)\b/,token:"keyword"},{regex:/\d+/i,token:"number"},{regex:/=|~|@|true|false/,token:"atom"},{regex:/(?:\.\.\/)*(?:[A-Za-z_][\w\.]*)+/,token:"variable-2"}],dash_comment:[{regex:/--\}\}/,pop:!0,token:"comment"},{regex:/./,token:"comment"}],comment:[{regex:/\}\}/,pop:!0,token:"comment"},{regex:/./,token:"comment"}],meta:{blockCommentStart:"{{--",blockCommentEnd:"--}}"}}),e.defineMode("handlebars",(function(t,n){var r=e.getMode(t,"handlebars-tags");return n&&n.base?e.multiplexingMode(e.getMode(t,n.base),{open:"{{",close:/\}\}\}?/,mode:r,parseDelimiters:!0}):r})),e.defineMIME("text/x-handlebars-template","handlebars")})),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define("mode/xml/xml.js",["../../lib/codemirror"],e):e(CodeMirror)}((function(e){var t={autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0},n={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,allowMissingTagName:!1,caseFold:!1};e.defineMode("xml",(function(r,o){function a(e,t){function n(n){return t.tokenize=n,n(e,t)}var r=e.next();return"<"==r?e.eat("!")?e.eat("[")?e.match("CDATA[")?n(l("atom","]]>")):null:e.match("--")?n(l("comment","--\x3e")):e.match("DOCTYPE",!0,!0)?(e.eatWhile(/[\w\._\-]/),n(d(1))):null:e.eat("?")?(e.eatWhile(/[\w\._\-]/),t.tokenize=l("meta","?>"),"meta"):(S=e.eat("/")?"closeTag":"openTag",t.tokenize=i,"tag bracket"):"&"==r?(e.eat("#")?e.eat("x")?e.eatWhile(/[a-fA-F\d]/)&&e.eat(";"):e.eatWhile(/[\d]/)&&e.eat(";"):e.eatWhile(/[\w\.\-:]/)&&e.eat(";"))?"atom":"error":(e.eatWhile(/[^&<]/),null)}function i(e,t){var n=e.next();return">"==n||"/"==n&&e.eat(">")?(t.tokenize=a,S=">"==n?"endTag":"selfcloseTag","tag bracket"):"="==n?(S="equals",null):"<"==n?(t.tokenize=a,t.state=f,t.tagName=t.tagStart=null,(n=t.tokenize(e,t))?n+" tag error":"tag error"):/[\'\"]/.test(n)?(t.tokenize=function(e){var t=function(t,n){for(;!t.eol();)if(t.next()==e){n.tokenize=i;break}return"string"};return t.isInAttribute=!0,t}(n),t.stringStartCol=e.column(),t.tokenize(e,t)):(e.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word")}function l(e,t){return function(n,r){for(;!n.eol();){if(n.match(t)){r.tokenize=a;break}n.next()}return e}}function d(e){return function(t,n){for(var r;null!=(r=t.next());){if("<"==r)return n.tokenize=d(e+1),n.tokenize(t,n);if(">"==r){if(1==e){n.tokenize=a;break}return n.tokenize=d(e-1),n.tokenize(t,n)}}return"meta"}}function s(e,t,n){this.prev=e.context,this.tagName=t||"",this.indent=e.indented,this.startOfLine=n,(A.doNotIndent.hasOwnProperty(t)||e.context&&e.context.noIndent)&&(this.noIndent=!0)}function c(e){e.context&&(e.context=e.context.prev)}function u(e,t){for(var n;e.context&&(n=e.context.tagName,A.contextGrabbers.hasOwnProperty(n)&&A.contextGrabbers[n].hasOwnProperty(t));)c(e)}function f(e,t,n){return"openTag"==e?(n.tagStart=t.column(),m):"closeTag"==e?p:f}function m(e,t,n){return"word"==e?(n.tagName=t.current(),w="tag",x):A.allowMissingTagName&&"endTag"==e?(w="tag bracket",x(e,t,n)):(w="error",m)}function p(e,t,n){return"word"==e?(e=t.current(),n.context&&n.context.tagName!=e&&A.implicitlyClosed.hasOwnProperty(n.context.tagName)&&c(n),n.context&&n.context.tagName==e||!1===A.matchClosing?(w="tag",g):(w="tag error",h)):A.allowMissingTagName&&"endTag"==e?(w="tag bracket",g(e,0,n)):(w="error",h)}function g(e,t,n){return"endTag"!=e?(w="error",g):(c(n),f)}function h(e,t,n){return w="error",g(e,0,n)}function x(e,t,n){if("word"==e)return w="attribute",k;if("endTag"==e||"selfcloseTag"==e){t=n.tagName;var r=n.tagStart;return n.tagName=n.tagStart=null,"selfcloseTag"==e||A.autoSelfClosers.hasOwnProperty(t)?u(n,t):(u(n,t),n.context=new s(n,t,r==n.indented)),f}return w="error",x}function k(e,t,n){return"equals"==e?b:(A.allowMissing||(w="error"),x(e,t,n))}function b(e,t,n){return"string"==e?v:"word"==e&&A.allowUnquoted?(w="string",x):(w="error",x(e,t,n))}function v(e,t,n){return"string"==e?v:x(e,t,n)}var y,S,w,M=r.indentUnit,A={},C=o.htmlMode?t:n;for(y in C)A[y]=C[y];for(y in o)A[y]=o[y];return a.isInText=!0,{startState:function(e){var t={tokenize:a,state:f,indented:e||0,tagName:null,tagStart:null,context:null};return null!=e&&(t.baseIndent=e),t},token:function(e,t){if(!t.tagName&&e.sol()&&(t.indented=e.indentation()),e.eatSpace())return null;S=null;var n=t.tokenize(e,t);return(n||S)&&"comment"!=n&&(w=null,t.state=t.state(S||n,e,t),w&&(n="error"==w?n+" error":w)),n},indent:function(t,n,r){var o=t.context;if(t.tokenize.isInAttribute)return t.tagStart==t.indented?t.stringStartCol+1:t.indented+M;if(o&&o.noIndent)return e.Pass;if(t.tokenize!=i&&t.tokenize!=a)return r?r.match(/^(\s*)/)[0].length:0;if(t.tagName)return!1!==A.multilineTagIndentPastTag?t.tagStart+t.tagName.length+2:t.tagStart+M*(A.multilineTagIndentFactor||1);if(A.alignCDATA&&/<!\[CDATA\[/.test(n))return 0;if((n=n&&/^<(\/)?([\w_:\.-]*)/.exec(n))&&n[1])for(;o;){if(o.tagName==n[2]){o=o.prev;break}if(!A.implicitlyClosed.hasOwnProperty(o.tagName))break;o=o.prev}else if(n)for(;o&&(r=A.contextGrabbers[o.tagName])&&r.hasOwnProperty(n[2]);)o=o.prev;for(;o&&o.prev&&!o.startOfLine;)o=o.prev;return o?o.indent+M:t.baseIndent||0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"\x3c!--",blockCommentEnd:"--\x3e",configuration:A.htmlMode?"html":"xml",helperType:A.htmlMode?"html":"xml",skipAttribute:function(e){e.state==b&&(e.state=x)},xmlCurrentTag:function(e){return e.tagName?{name:e.tagName,close:"closeTag"==e.type}:null},xmlCurrentContext:function(e){var t=[];for(e=e.context;e;e=e.prev)t.push(e.tagName);return t.reverse()}}})),e.defineMIME("text/xml","xml"),e.defineMIME("application/xml","xml"),e.mimeModes.hasOwnProperty("text/html")||e.defineMIME("text/html",{name:"xml",htmlMode:!0})})),function(e){"function"==typeof e.define&&e.define("modeHandlebars",["mode/handlebars/handlebars.js"],(function(){}))}(this);